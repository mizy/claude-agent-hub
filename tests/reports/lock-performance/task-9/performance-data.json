{
  "testSuite": "Lock Performance - Task 9",
  "executionDate": "2026-02-03T18:34:43+08:00",
  "environment": {
    "platform": "darwin",
    "nodeVersion": "v20.x",
    "testFramework": "vitest 2.1.9",
    "totalDuration": "1.56s"
  },
  "baseline": {
    "source": "Task-19 FINAL_REPORT.md",
    "singleLockOp": "0.102ms",
    "lockCheck": "0.001ms",
    "pidRead": "0.013ms",
    "deadlockCleanup": "0.3ms",
    "throughput": "10075 ops/s"
  },
  "scenarios": [
    {
      "id": "T1",
      "name": "单次锁操作性能",
      "category": "基本性能",
      "target": "< 1ms",
      "iterations": 1000,
      "metrics": {
        "average": "0.107ms",
        "p50": "0.101ms",
        "p95": "0.138ms",
        "p99": "0.191ms"
      },
      "baselineComparison": {
        "baseline": "0.102ms",
        "delta": "+4.5%",
        "status": "pass"
      },
      "result": "✅ PASS"
    },
    {
      "id": "T2",
      "name": "锁检查性能",
      "category": "基本性能",
      "target": "< 0.1ms",
      "iterations": 10000,
      "metrics": {
        "average": "0.0015ms",
        "p50": "0.0014ms",
        "p95": "0.0016ms",
        "p99": "0.0019ms"
      },
      "baselineComparison": {
        "baseline": "0.001ms",
        "delta": "+45.2%",
        "status": "pass",
        "note": "仍远低于 0.1ms 目标"
      },
      "result": "✅ PASS"
    },
    {
      "id": "T3",
      "name": "PID 读取性能",
      "category": "基本性能",
      "target": "< 0.2ms",
      "iterations": 5000,
      "metrics": {
        "average": "0.0131ms",
        "p50": "0.0127ms",
        "p95": "0.0159ms",
        "p99": "0.0215ms"
      },
      "baselineComparison": {
        "baseline": "0.013ms",
        "delta": "+0.9%",
        "status": "pass"
      },
      "result": "✅ PASS"
    },
    {
      "id": "T4",
      "name": "并发写入竞争",
      "category": "并发安全",
      "target": "100% 互斥",
      "config": {
        "workers": 10,
        "operationsPerWorker": 100
      },
      "metrics": {
        "successfulOps": "1000/1000",
        "totalDuration": "263.11ms",
        "dataIntegrity": "1000/1000 (100.0%)",
        "errorCount": 0
      },
      "result": "✅ PASS"
    },
    {
      "id": "T5",
      "name": "死锁检测与清理",
      "category": "并发安全",
      "target": "< 10ms",
      "iterations": 100,
      "metrics": {
        "average": "0.100ms",
        "p50": "0.094ms",
        "p95": "0.139ms",
        "p99": "0.166ms"
      },
      "baselineComparison": {
        "baseline": "0.3ms",
        "delta": "-66.7%",
        "status": "pass",
        "note": "显著优于基线"
      },
      "result": "✅ PASS"
    },
    {
      "id": "T6",
      "name": "高频率锁操作",
      "category": "压力测试",
      "target": "> 1,000 ops/s",
      "iterations": 10000,
      "metrics": {
        "totalDuration": "972.31ms",
        "throughput": "10285 ops/s",
        "errorCount": 0
      },
      "baselineComparison": {
        "baseline": "10075 ops/s",
        "delta": "+2.1%",
        "status": "pass"
      },
      "result": "✅ PASS"
    },
    {
      "id": "T7",
      "name": "长时间持有锁影响",
      "category": "压力测试",
      "target": "验证其他操作不受阻",
      "config": {
        "holdDuration": "100ms",
        "checkIterations": 1000
      },
      "metrics": {
        "totalCheckDuration": "1.39ms",
        "averageCheckLatency": "0.0014ms"
      },
      "result": "✅ PASS"
    },
    {
      "id": "T8",
      "name": "锁状态一致性",
      "category": "可靠性",
      "target": "获取/释放/重复释放",
      "checks": {
        "initialState": "✓ 无锁",
        "acquireLock": "✓ 成功",
        "releaseLock": "✓ 成功",
        "repeatRelease": "✓ 安全",
        "reacquire": "✓ 成功"
      },
      "result": "✅ PASS"
    },
    {
      "id": "T9",
      "name": "锁文件损坏处理",
      "category": "可靠性",
      "target": "写入无效内容后自动恢复",
      "metrics": {
        "recoverySuccess": true,
        "recoveryLatency": "0.14ms"
      },
      "result": "✅ PASS"
    },
    {
      "id": "T10",
      "name": "锁被外部删除",
      "category": "可靠性",
      "target": "自动恢复测试",
      "checks": {
        "initialState": "✓ 锁已获取",
        "externalDeletion": "✓ 锁文件已删除",
        "releaseOperation": "✓ 安全",
        "reacquireSuccess": true
      },
      "metrics": {
        "recoveryLatency": "0.09ms"
      },
      "result": "✅ PASS"
    }
  ],
  "summary": {
    "totalTests": 10,
    "passed": 10,
    "failed": 0,
    "categories": {
      "基本性能": "3/3 ✅",
      "并发安全": "2/2 ✅",
      "压力测试": "2/2 ✅",
      "可靠性": "3/3 ✅"
    },
    "keyFindings": [
      "所有测试场景均通过性能目标",
      "单次锁操作延迟 0.107ms (P50: 0.101ms)，符合 < 1ms 目标",
      "锁检查延迟 0.0015ms，远低于 0.1ms 目标",
      "高频操作吞吐量达到 10,285 ops/s，超过 1,000 ops/s 目标",
      "并发安全性 100%，无数据竞争",
      "死锁清理性能优于基线 66.7%",
      "可靠性测试全部通过，包括文件损坏和删除恢复"
    ]
  }
}
