{
  "testDate": "2026-02-03T16:45:56+08:00",
  "testFile": "tests/lock-performance.test.ts",
  "totalTests": 10,
  "passed": 10,
  "failed": 0,
  "totalDuration": "1.71s",
  "testDuration": "1.48s",
  "environment": {
    "nodeVersion": "v22.12.0",
    "os": "macOS (Darwin 25.2.0)",
    "testFramework": "vitest 2.1.9"
  },
  "performanceMetrics": {
    "basicOperations": {
      "lockAcquireRelease": {
        "iterations": 1000,
        "totalTime": "106.01ms",
        "avgTime": "0.106ms",
        "throughput": 9433,
        "unit": "ops/s"
      },
      "lockCheck": {
        "iterations": 10000,
        "totalTime": "13.60ms",
        "avgTime": "0.001ms",
        "throughput": 735294,
        "unit": "ops/s"
      },
      "pidRead": {
        "iterations": 5000,
        "totalTime": "67.48ms",
        "avgTime": "0.013ms",
        "throughput": 74091,
        "unit": "ops/s"
      }
    },
    "concurrency": {
      "parallelWriteContention": {
        "workers": 10,
        "attemptsPerWorker": 100,
        "successfulLocks": 100,
        "totalTime": "148.03ms",
        "avgTimePerLock": "1.48ms",
        "successRate": "100%"
      },
      "deadlockDetection": {
        "detectionTime": "0.27ms",
        "status": "success"
      }
    },
    "stressTest": {
      "highFrequencyOperations": {
        "iterations": 10000,
        "totalTime": "1029.56ms",
        "throughput": 9713,
        "errors": 0,
        "unit": "ops/s"
      },
      "longHeldLock": {
        "lockDuration": "100ms",
        "checkOperations": 1000,
        "totalCheckTime": "1.41ms",
        "avgCheckTime": "0.001ms"
      }
    },
    "reliability": {
      "stateConsistency": "passed",
      "corruptedFileHandling": "passed",
      "externalDeletion": "passed"
    }
  },
  "resourceUsage": {
    "memory": "minimal (few bytes per lock)",
    "diskIO": "light (2-3 operations per lock)",
    "cpu": "negligible",
    "network": "none"
  },
  "keyFindings": {
    "strengths": [
      "High performance: 0.1ms per lock operation",
      "Stability: 0 errors in 10,000 high-frequency operations",
      "Concurrency safety: 100% success rate with 10 workers",
      "Fast checks: 0.001ms lock status check",
      "Reliability: Handles corrupted/missing lock files correctly"
    ],
    "bottlenecks": [
      "File I/O: Main overhead at ~0.1ms level",
      "Concurrent waiting: ~1.48ms average wait time under contention",
      "PID reading: Slower than pure memory operations at 0.013ms"
    ]
  },
  "performanceRating": {
    "lockAcquireRelease": 5,
    "lockCheck": 5,
    "pidRead": 4,
    "deadlockDetection": 5,
    "concurrency": 4,
    "overall": 4.6
  },
  "recommendations": {
    "currentStatus": "Production-ready, no optimization needed",
    "futureOptimizations": [
      "In-memory lock cache for single-process scenarios (if needed)",
      "Lock pooling to reduce object creation (minimal benefit)",
      "Batch operations to reduce I/O (for special cases only)"
    ],
    "conclusion": "Current performance exceeds requirements. No immediate action needed."
  }
}
